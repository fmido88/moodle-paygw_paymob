{"version":3,"file":"method-selector.min.js","sources":["../src/method-selector.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * TODO describe module method-selector\n *\n * @module     paygw_paymob/method-selector\n * @copyright  2024 Mohammad Farouk <phun.for.physics@gmail.com>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport $ from 'jquery';\nlet wwwroot;\n/**\n * Display extra form fields according to the method.\n */\nfunction extraData() {\n    const phoneNumberInput = document.getElementById('phone-number');\n    const phoneGroup = document.getElementById('phone-group');\n    const paymentTypeSelect = document.getElementById('payment-type');\n    const savedCardsGroup = document.getElementById('saved-cards-group');\n    if (paymentTypeSelect.value === 'wallet') {\n        if (phoneGroup) {\n            phoneGroup.style.display = 'block';\n        }\n        if (savedCardsGroup) {\n            savedCardsGroup.style.display = 'none';\n        }\n    } else if (paymentTypeSelect.value === 'card') {\n        if (phoneGroup) {\n            phoneGroup.style.display = 'none';\n        }\n        if (phoneNumberInput) {\n            phoneNumberInput.value = '';\n        }\n        if (savedCardsGroup) {\n            savedCardsGroup.style.display = 'block';\n        }\n    } else {\n        if (phoneGroup) {\n            phoneGroup.style.display = 'none';\n        }\n        if (phoneNumberInput) {\n            phoneNumberInput.value = '';\n        }\n        if (savedCardsGroup) {\n            savedCardsGroup.style.display = 'none';\n        }\n    }\n}\n\n/**\n * Change the image according to the selected method.\n */\nfunction changeImage() {\n    const paymentTypeSelect = document.getElementById('payment-type');\n    // Get references to the necessary elements\n    const imagePlaceholder = document.querySelector('.paymob-image-place-holder');\n    // Define a mapping of payment method values to image URLs\n    const imageUrls = {\n        card: wwwroot + '/payment/gateway/paymob/img/visa_mastercard.png',\n        aman: wwwroot + '/payment/gateway/paymob/img/aman.png',\n        wallet: wwwroot + '/payment/gateway/paymob/img/Wallets.png'\n    };\n    const imageAlts = {\n        card: 'visa_mastercard',\n        aman: 'aman',\n        wallet: 'Wallets'\n    };\n    // Get the selected payment method value\n    const selectedValue = paymentTypeSelect.value;\n\n    // Create an image element with the corresponding URL\n    const imageElement = document.createElement('img');\n    imageElement.src = imageUrls[selectedValue];\n    imageElement.classList.add('paymob-payment-method-image'); // Add a class to the image element\n    imageElement.alt = imageAlts[selectedValue];\n    // Remove any existing images from the image placeholder\n    imagePlaceholder.innerHTML = '';\n\n    // Append the new image to the image placeholder\n    imagePlaceholder.appendChild(imageElement);\n}\n\nexport const init = (url) => {\n    wwwroot = url;\n    extraData();\n    changeImage();\n    $('#payment-type').on(\"change\", function() {\n        extraData();\n        changeImage();\n    });\n};"],"names":["wwwroot","extraData","phoneNumberInput","document","getElementById","phoneGroup","paymentTypeSelect","savedCardsGroup","value","style","display","changeImage","imagePlaceholder","querySelector","imageUrls","card","aman","wallet","selectedValue","imageElement","createElement","src","classList","add","alt","innerHTML","appendChild","url","on"],"mappings":";;;;;;;SAwBIA,iBAIKC,kBACCC,iBAAmBC,SAASC,eAAe,gBAC3CC,WAAaF,SAASC,eAAe,eACrCE,kBAAoBH,SAASC,eAAe,gBAC5CG,gBAAkBJ,SAASC,eAAe,qBAChB,WAA5BE,kBAAkBE,OACdH,aACAA,WAAWI,MAAMC,QAAU,SAE3BH,kBACAA,gBAAgBE,MAAMC,QAAU,SAED,SAA5BJ,kBAAkBE,OACrBH,aACAA,WAAWI,MAAMC,QAAU,QAE3BR,mBACAA,iBAAiBM,MAAQ,IAEzBD,kBACAA,gBAAgBE,MAAMC,QAAU,WAGhCL,aACAA,WAAWI,MAAMC,QAAU,QAE3BR,mBACAA,iBAAiBM,MAAQ,IAEzBD,kBACAA,gBAAgBE,MAAMC,QAAU,kBAQnCC,oBACCL,kBAAoBH,SAASC,eAAe,gBAE5CQ,iBAAmBT,SAASU,cAAc,8BAE1CC,UAAY,CACdC,KAAMf,QAAU,kDAChBgB,KAAMhB,QAAU,uCAChBiB,OAAQjB,QAAU,2CAQhBkB,cAAgBZ,kBAAkBE,MAGlCW,aAAehB,SAASiB,cAAc,OAC5CD,aAAaE,IAAMP,UAAUI,eAC7BC,aAAaG,UAAUC,IAAI,+BAC3BJ,aAAaK,IAZK,CACdT,KAAM,kBACNC,KAAM,OACNC,OAAQ,WASiBC,eAE7BN,iBAAiBa,UAAY,GAG7Bb,iBAAiBc,YAAYP,iKAGZQ,MACjB3B,QAAU2B,IACV1B,YACAU,kCACE,iBAAiBiB,GAAG,UAAU,WAC5B3B,YACAU"}