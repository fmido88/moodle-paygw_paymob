define("paygw_paymob/actions",["exports","jquery","core/ajax","core/templates","core/notification","core/str","core/prefetch"],(function(_exports,_jquery,_ajax,_templates,_notification,_str,_prefetch){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}
/**
   * Perform actions like refund, void or inquiry a transaction
   *
   * @module     paygw_paymob/actions
   * @copyright  2024 Mohammad Farouk <phun.for.physics@gmail.com>
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */function callAjax(data,purpose){return _ajax.default.call([{methodname:"paygw_paymob_"+purpose,args:data}])[0]}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_jquery=_interopRequireDefault(_jquery),_ajax=_interopRequireDefault(_ajax),_templates=_interopRequireDefault(_templates),_notification=_interopRequireDefault(_notification),(_prefetch=_interopRequireDefault(_prefetch)).default.prefetchStrings("paygw_paymob",["voiding_status","voided_successfully","voided_failed","refunding_status","refunding_successfully","refunding_failed","transaction_inquiry"]);_exports.init=()=>{const allButtons=(0,_jquery.default)('button[data-action="void"], button[data-action="refund"], button[data-action="inquiry"]');(0,_jquery.default)('button[data-action="void"]').on("click",(function(){var id;allButtons.prop("disabled",!0),(id=(0,_jquery.default)(this).data("orderid"),callAjax({id:id},"void").done((data=>{let message,title=(0,_str.get_string)("voiding_status","paygw_paymob");return message="success"===data.status?(0,_str.get_string)("voided_successfully","paygw_paymob"):data.msg?data.msg:(0,_str.get_string)("voided_failed","paygw_paymob"),_notification.default.alert(title,message,(0,_str.get_string)("ok")).then((modal=>modal.show()))})).fail((error=>{throw error}))).always((()=>{allButtons.prop("disabled",!1),(0,_jquery.default)(this).hide()}))})),(0,_jquery.default)('button[data-action="refund"]').on("click",(function(){allButtons.prop("disabled",!0),function(id){return callAjax({id:id,amount:arguments.length>1&&void 0!==arguments[1]?arguments[1]:0},"refund").done((data=>{let message,title=(0,_str.get_string)("refunding_status","paygw_paymob");return message="success"===data.status?(0,_str.get_string)("refunding_successfully","paygw_paymob"):data.msg?data.msg:(0,_str.get_string)("refunding_failed","paygw_paymob"),_notification.default.alert(title,message,(0,_str.get_string)("ok")).then((modal=>{modal.show()}))})).fail((error=>{throw error}))}((0,_jquery.default)(this).data("orderid")).always((()=>{allButtons.prop("disabled",!1),(0,_jquery.default)(this).hide()}))})),(0,_jquery.default)('button[data-action="inquiry"]').on("click",(function(){var id;allButtons.prop("disabled",!0),(id=(0,_jquery.default)(this).data("orderid"),callAjax({id:id},"inquiry").done((async data=>{let message;message=data.error?data.error:await _templates.default.render("paygw_paymob/inquiry",data);let title=(0,_str.get_string)("transaction_inquiry","paygw_paymob");(await _notification.default.alert(title,message,(0,_str.get_string)("ok"))).show()})).fail((error=>{throw error}))).always((()=>{allButtons.prop("disabled",!1)}))}))}}));

//# sourceMappingURL=actions.min.js.map